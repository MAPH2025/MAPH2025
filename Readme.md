
# README.md

## Structure

The pmem directory contains the code for our algorithm, including:
- murmur3.h -- hash function
- MAPH.h -- basic algorithm implementation  
- MAPH_expansion.h -- dynamic expansion extension
- MAPH_recovery.h -- consistency recovery extension
- main.cpp -- test program implementation

The compare directory contains implementations of comparison algorithms MapEmbed and EEPH.

The data directory contains data for MAPH and MapEmbed, which are txt files generated by YCSB. For EEPH data, you need to use convert_ycsb.py in its directory to convert txt files to corresponding input .dat files.

## Usage

### MAPH
First configure the PMem environment, write the corresponding PMem file path into PMEM_PATH in main.cpp, then set other variables. All test functions start with test_, and you can call different test functions in the main function as needed.

Compilation command:
```bash
g++ main.cpp -o main_pmem -lpmem -I. -std=c++17
```

### MapEmbed
Similar to MAPH testing method, use `make` to compile in its directory.

### EEPH
Use cmake for compilation, with results in the `build` folder.

Compilation commands:
```bash
$ mkdir build
$ cd build
$ cmake -DCMAKE_BUILD_TYPE=Release -DUSE_PMEM=ON ..
```

Run run_ycsb.sh in the `script` folder for testing.
